# waterfall-sinanews
# 预览地址
## 懒加载原理
为什么要懒加载：
懒加载即延迟，对于图片过多的页面，为了加快页面加载速度，我们需要将页面内未出现在可视区域内的图片先不做加载， 等到滚动到可视区域后再去加载。

这样一来页面加载性能大幅提升，提高了用户体验。

实现原理：

在页面载入时将img标签內的src指向一个小图片，即占位图，将真实地址存放于一个自定义属性data-src中，然后获取页面上的img标签并保存，开启一个定时器来遍历保存的img标签，接下来判断每个img是否出现在可视区，当某个img出现在了可视区域，就将真实地址赋值给该img的src并将该img从数组中删除以避免重复判断。

判断元素是否出现在了可视区

实现流程：
1.网页滚动事件触发
2.执行加载图片操作
3.判断图片是否在可视区且是否已经加载过
4.在可视区且未被加载过则动态地将data-src的值赋给该图片的src属性。
## 瀑布流原理
瀑布流布局由pinterest.com网站首创，它的原理是：先通过计算出一排能够容纳几列元素，然后寻找各列之中所有元素高度之和的最小者，并将新的元素添加到该列上，然后继续寻找所有列的各元素之和的最小者，继续添加至该列上，如此循环下去，直至所有元素均能够按要求排列为止；

##木桶原理 木桶布局的原理和实现：https://zhuanlan.zhihu.com/p/28466291 高度一样，而宽度不同的布局方式称之为木桶布局。它有几个鲜明的特点： 每行的图片高度一致；每行的图片都是占满的。 采用构造函数创建对象的方式来写这段代码，注意按照约定构造函数的首字母要大写。创建一个新对象，然后将构造函数的作用域赋给新对象，调用构造函数中的方法。

函数名声明为 Barrel ，意为木桶。然后就要确定有哪些属性和方法。在理解了思路步骤的前提下，可以构思需要哪些属性、方法以及它们的作用。

属性：
>每行图片的高度固定： rowHeight, 行高
拥有一个固定的容器： DOM对象，一个容器 命名为 .ct。 还应该有行容器和图片容器，但是由于这两个容器内容数量不固定，所以在布局的时候再创建
行容器的宽度： width， 获取ct的宽度
存放每行图片的数组： imgArr[]。每次把加载的图片压入该数组，判断该行是否超出宽度。
方法：
>拥有素材图片 ： 通过getImgUrls()方法来获取图片链接，（或从数据库中获取图片）。这里是通过访问https://placeholder.com/ 网站来获取代码，具体后述
加载图片信息： loadImg()方法来加载图片，以便获取图片信息，
渲染图片队列： render() 改变图片的比例大小，计算一行可以放置多少个图片
放置图片位置： layout() 将改变完大小的图片放置到页面上，append到对应的DOM元素节点上。具体关系对应前面的父子关系即可
## 实现原理
整体思路: 1.获取数据 2.将数据变为DOM结构,以瀑布流的方式部署到页面上 3.当页面滚动至底部再次获取数据循环
